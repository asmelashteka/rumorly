from datasketch import MinHash,MinHashLSH
import sys
import re


non_bmp_map = dict.fromkeys(range(0x10000, sys.maxunicode + 1), 0xfffd)
minhashes={}
lsh=MinHashLSH(threshold=0.6, num_perm=50)


from datasketch import MinHash,MinHashLSH
lsh=MinHashLSH(threshold=0.6,num_perm=50)
minhashes={}
def minhash(tweet_text):
    p=tweet_text.split()
    m=MinHash(num_perm=50)
    trigram=[]
    for i in range(len(p)-2):
        trigram.append(p[i]+" "+p[i+1]+" "+p[i+2])
        i=i+2
    for d in trigram:
        m.update(d.encode('UTF-8'))
    minhashes.update({tweet_text:m})
    lsh.insert("%s"%tweet_text,m)
    return m



a=minhash("really?Germanwings Airbus A320 crashes in French Alps near Digne http:\/\/t.co\/yNlWbNJmYI")

b=minhash("\u201c@BBCBreaking: Germanwings Airbus A320 crashes in French Alps near Digne http://t.co/VyfwZhDhtc\u201d another plane crash.. Oh God.")

c=minhash("\u201c@BBCBreaking: Germanwings Airbus A320 crashes in French Alps near Digne http://t.co/0RVUOUMD4z\u201d")



"""output:

<datasketch.minhash.MinHash object at 0x05EE52D8>
<datasketch.minhash.MinHash object at 0x0612D7D8>
<datasketch.minhash.MinHash object at 0x0612D670>

"""
